<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ³ã„ãƒã‚° - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ</title>
    <style>
        /* ãŠå¹´å¯„ã‚Šã«ã‚‚å„ªã—ã„ã€å¤§ããã¦è¦‹ã‚„ã™ã„ãƒ‡ã‚¶ã‚¤ãƒ³ */
        body {
            font-family: sans-serif; background-color: #f0f8ff;
            display: flex; flex-direction: column; align-items: center;
            padding: 20px; color: #333;
        }
        h1 { margin-bottom: 20px; color: #e91e63; }
        .container {
            background: white; padding: 30px; border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 100%; max-width: 500px; text-align: center;
        }
        label { font-size: 20px; font-weight: bold; display: block; margin-bottom: 15px; }
        /* å¤§ããªæ–‡å­—å…¥åŠ›æ¬„ */
        textarea {
            width: 90%; height: 120px; padding: 15px; font-size: 22px;
            border: 2px solid #ddd; border-radius: 10px; margin-bottom: 20px;
            resize: none; /* ã‚µã‚¤ã‚ºå¤‰æ›´ã‚’ç¦æ­¢ */
        }
        /* æŠ¼ã—ã‚„ã™ã„å¤§ããªãƒœã‚¿ãƒ³ */
        button {
            background-color: #e91e63; color: white; font-size: 22px;
            font-weight: bold; padding: 15px 30px; border: none;
            border-radius: 50px; cursor: pointer; width: 100%;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        button:active { transform: translateY(2px); } /* æŠ¼ã—ãŸæ„Ÿã˜ã‚’å‡ºã™ */
        
        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        #result-area {
            margin-top: 30px; display: none; /* æœ€åˆã¯éš ã™ */
            border-top: 3px dotted #ddd; padding-top: 30px;
        }
        .result-title { font-weight: bold; font-size: 18px; margin-bottom: 10px; }
        #generated-url {
            font-size: 14px; word-break: break-all; padding: 15px;
            background: #f9f9f9; border: 1px solid #ddd; border-radius: 5px;
            margin-bottom: 15px; user-select: all; /* ã‚¿ãƒƒãƒ—ã§å…¨é¸æŠ */
        }
        .copy-btn { background-color: #2196F3; }
    </style>
</head>
<body>

    <h1>ğŸ’Œ æƒ³ã„ãƒã‚°ã‚’ä½œæˆ</h1>
    <div class="container">
        <label for="message">ğŸ‘‡ã“ã“ã«è´ˆã‚‹è¨€è‘‰ã‚’å…¥ã‚Œã¦ã­</label>
        <textarea id="message" placeholder="ï¼ˆä¾‹ï¼‰ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼ã„ã¤ã¾ã§ã‚‚å…ƒæ°—ã§ã„ã¦ã­ã€‚"></textarea>
        <button onclick="generateLink()">âœ¨ ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆç”¨URLã‚’ä½œã‚‹</button>

        <div id="result-area">
            <p class="result-title">ğŸ‘‡ã“ã®URLã‚’å®¶æ—ã«é€ã£ã¦ã­ï¼</p>
            <div id="generated-url"></div>
            <button class="copy-btn" onclick="copyToClipboard()">ğŸ“‹ URLã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
        </div>
    </div>

    <script>
        // URLã‚’ä½œæˆã™ã‚‹é­”æ³•ã®ãƒœã‚¿ãƒ³
        function generateLink() {
            const msgInput = document.getElementById('message').value;
            if (!msgInput) {
                alert("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç©ºã£ã½ã ã‚ˆï¼ä½•ã‹å…¥åŠ›ã—ã¦ã­ã€‚");
                return;
            }

            // å…¥åŠ›ã•ã‚ŒãŸæ–‡å­—ã‚’ã€URLã§ä½¿ãˆã‚‹ç‰¹æ®Šãªå½¢å¼ã«å¤‰æ›ï¼ˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼‰
            const encodedMsg = encodeURIComponent(msgInput);
            
            // ä»Šã„ã‚‹å ´æ‰€ã®URLã‚’å…ƒã«ã€ARãƒšãƒ¼ã‚¸ã®URLã‚’çµ„ã¿ç«‹ã¦ã‚‹
            // ä¾‹: https://ã‚ãªãŸã®ID.github.io/omoimagu/ + index.html?msg=...
            const baseUrl = window.location.href.replace('setup.html', '');
            const finalUrl = baseUrl + 'index.html?msg=' + encodedMsg;

            // çµæœã‚’è¡¨ç¤ºã™ã‚‹
            document.getElementById('generated-url').textContent = finalUrl;
            document.getElementById('result-area').style.display = 'block';
            
            // ä½œæˆãƒœã‚¿ãƒ³ã®ä¸‹ã¸è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('result-area').scrollIntoView({behavior: "smooth"});
        }

        // URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒœã‚¿ãƒ³
        function copyToClipboard() {
            const urlText = document.getElementById('generated-url').textContent;
            // æœ€æ–°ã®ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã‚’ä½¿ã†
            if (navigator.clipboard) {
                navigator.clipboard.writeText(urlText).then(() => {
                    alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\nLINEã‚„ãƒ¡ãƒ¼ãƒ«ã®ç”»é¢ã§ã€Œè²¼ã‚Šä»˜ã‘ã€ã¦é€ã£ã¦ã­ã€‚");
                }, () => {
                    alert("ã”ã‚ã‚“ã­ã€ã‚³ãƒ”ãƒ¼ã§ããªã‹ã£ãŸã¿ãŸã„ã€‚\nä¸Šã®URLã®æ–‡å­—ã‚’é•·æŠ¼ã—ã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ã­ã€‚");
                });
            } else {
                // å¤ã„ã‚¹ãƒãƒ›ç”¨ã®ã‚³ãƒ”ãƒ¼æ–¹æ³•ï¼ˆå¿µã®ãŸã‚ï¼‰
                const textArea = document.createElement("textarea");
                textArea.value = urlText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\nLINEã‚„ãƒ¡ãƒ¼ãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã­ã€‚");
            }
        }
    </script>

</body>
</html>
