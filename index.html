{\rtf1\ansi\ansicpg932\cocoartf2867
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 <!DOCTYPE html>\
<html>\
<head>\
    <meta charset="utf-8">\
    <title>\uc0\u24819 \u12356 \u12510 \u12464  - OMOI-MAG AR</title>\
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>\
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>\
</head>\
\
<body style="margin: 0; overflow: hidden;">\
\
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">\
        \
        <a-assets>\
            <audio id="insert-sound" src="sounds/kacha.mp3" preload="auto"></audio>\
            <audio id="music-a" src="music/side-a.mp3" preload="auto"></audio>\
            <audio id="music-b" src="music/side-b.mp3" preload="auto"></audio>\
        </a-assets>\
\
        <a-marker type="image" url="markers/marker-a.patt" id="marker-a">\
            <a-entity text="value: Side A Playing; color: #FF0000" position="0 0.5 0" align="center"></a-entity>\
        </a-marker>\
\
        <a-marker type="image" url="markers/marker-b.patt" id="marker-b">\
            <a-entity text="value: Side B Playing; color: #0000FF" position="0 0.5 0" align="center"></a-entity>\
        </a-marker>\
\
        <a-entity camera></a-entity>\
    </a-scene>\
\
    <script>\
        const isAndroid = /Android/i.test(navigator.userAgent);\
        const markerA = document.querySelector('#marker-a');\
        const markerB = document.querySelector('#marker-b');\
        const soundKacha = document.querySelector('#insert-sound');\
        const musicA = document.querySelector('#music-a');\
        const musicB = document.querySelector('#music-b');\
\
        let isPlaying = false;\
\
        // --- A\uc0\u38754 \u35469 \u35672 \u26178 \u12398 \u20966 \u29702  ---\
        markerA.addEventListener('markerFound', () => \{\
            if (!isPlaying) \{\
                // Android\uc0\u12398 \u22580 \u21512 \u12398 \u12415 \u30913 \u26997 \u12481 \u12455 \u12483 \u12463 \u65288 \u23558 \u26469 \u12398 \u23455 \u35013 \u29992 \u12503 \u12524 \u12540 \u12473 \u12507 \u12523 \u12480 \u12540 \u65289 \
                if (isAndroid) \{\
                    console.log("Android detected: Checking Magnetometer...");\
                    // \uc0\u12371 \u12371 \u12395 \u30913 \u27671 \u12475 \u12531 \u12469 \u12540 \u12398 \u21028 \u23450 \u12525 \u12472 \u12483 \u12463 \u12434 \u36861 \u21152 \u21487 \u33021 \
                \}\
                \
                playContent(musicA);\
            \}\
        \});\
\
        // --- B\uc0\u38754 \u35469 \u35672 \u26178 \u12398 \u20966 \u29702  ---\
        markerB.addEventListener('markerFound', () => \{\
            if (!isPlaying) \{\
                playContent(musicB);\
            \}\
        \});\
\
        function playContent(targetMusic) \{\
            isPlaying = true;\
            // \uc0\u12300 \u12459 \u12481 \u12515 \u12483 \u12301 \u38899 \u12434 \u20877 \u29983 \
            soundKacha.play();\
            \
            // \uc0\u23569 \u12375 \u36933 \u12425 \u12379 \u12390 \u38899 \u27005 \u12434 \u38283 \u22987 \u65288 \u12459 \u12481 \u12515 \u12483 \u12398 \u20313 \u38907 \u12398 \u12383 \u12417 \u65289 \
            setTimeout(() => \{\
                targetMusic.play();\
                console.log("Music started. Even if you move the magnet, it keeps playing.");\
            \}, 500);\
        \}\
\
        // iPhone\uc0\u23550 \u31574 \u65306 \u30011 \u38754 \u12479 \u12483 \u12503 \u12391 \u12458 \u12540 \u12487 \u12451 \u12458 \u12434 \u26377 \u21177 \u21270 \u12377 \u12427 \u26696 \u20869 \u12434 \u20986 \u12377 \u12398 \u12364 \u12505 \u12473 \u12488 \u12391 \u12377 \
        window.addEventListener('click', () => \{\
            // \uc0\u12502 \u12521 \u12454 \u12470 \u12398 \u33258 \u21205 \u20877 \u29983 \u21046 \u38480 \u12434 \u35299 \u38500 \u12377 \u12427 \u12383 \u12417 \u12398 \u12480 \u12511 \u12540 \u20877 \u29983 \
            musicA.load();\
            musicB.load();\
            soundKacha.load();\
        \});\
    </script>\
</body>\
</html>}